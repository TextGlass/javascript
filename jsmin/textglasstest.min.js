/* TextGlass JS test client 1.0.0
 * http://textglass.org
 * Copyright (c) 2015 TextGlass
 * License: Apache 2.0
 */
var require=require||void 0,textglass=textglass||("function"===typeof require?require("./textglass.min"):{}),textglasstest=function(g,f){g.loadURL=function(c,h){f.debug(1,"testURL:",c);var a={status:1};a.callback=h||function(){};a.test={};f.getURL(a.test,a,c,function(){if(2===a.test.status){var b=g.loadObject(a.test.json);!b||b.error?h("error",b?b.msg:"Unknown error"):h("pass",b.msg)}})};g.loadObject=function(c){var h=Date.now(),a=c.domain,b=c.domainVersion;if("test"!==c.type)return{error:!0,msg:"Invalid test file"};
f.debug(1,"Testing:",a,"Version:",b);if(!f.domains[a])return{error:!0,msg:"Domain not found: "+a};a=f.domains[a];if(b!==a.version)return{error:!0,msg:"Domain versions do not match: "+b};for(b=0;b<c.tests.length;b++){var d=c.tests[b];f.debug(2,"test input",d.input);var e=a.classify(d.input);f.debug(2,"test result",e);if(!e&&d.resultPatternId||e&&!d.resultPatternId||e&&e.patternId!==d.resultPatternId)return{error:!0,msg:"Test failed, "+(e?e.patternId:e)+" != "+d.resultPatternId};for(var g in d.resultAttributes){var k=
d.resultAttributes[g],l=e?e[g]:void 0;if(l!==k)return{error:!0,msg:"Test failed for "+d.resultPatternId+"."+g+", "+k+" != "+l}}f.debug(1,"Test passed",d.resultPatternId)}c=Date.now()-h;f.debug(1,"All tests passed");return{msg:"All tests passed ("+b+"), time: "+c+"ms"}};return g}(textglasstest||{},textglass||{}),module=module||void 0;"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=textglasstest);
